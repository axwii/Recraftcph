---
import Frame from "../layout/frame.astro";
import ProductCard from "../components/ProductCard.astro";

const data = await fetch(
  "https://hkltapzneruelglyxqhl.supabase.co/rest/v1/Recraftcph?select=*",
  {
    method: "GET",
    headers: {
      apikey:
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhrbHRhcHpuZXJ1ZWxnbHl4cWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTU1OTMyOTksImV4cCI6MjAzMTE2OTI5OX0.FQkPXh4GnFu6SnWkHdluQYFqHcG2cY2eE5Q8AnBtOlw",
    },
  }
).then((res) => res.json());

console.log(data);
---

<Frame pageTitle="Recractcph - Produkter">
  <div class="center-text">
    <h1>Produkter</h1>
    <p>Her kan du se vores produkter</p>
    <p>Vi har {data.length} produkter</p>
  </div>
  <div class="sortingBox">
    <p>Tasker</p>
    <p>Nibs</p>
    <p>KÃ¸kken</p>
    <p>Pynt</p>
  </div>
  <section class="product-grid">
    {
      data.map((item) => {
        return (
          <a href={`/product/${item.id}`}>
            <ProductCard data={item} />
          </a>
        );
      })
    }
  </section>
</Frame>

<style>
  .product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1rem;
    max-width: 1200px; /* Adjust this value as needed */
    margin: 0 auto;
  }
  .center-text {
    text-align: center;
  }

  a {
    text-decoration: none;
    color: inherit;
  }

  .sortingBox {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1rem;
  }

  .sortingBox p {
    border: 1px solid #ccc;
    padding: 1rem;
    text-align: center;
  }
</style>
